apiVersion: 2018-10-01
type: Microsoft.ContainerInstance/containerGroups
location: northeurope
name: keyforge-bot
properties:
  containers:
  - name: bot
    properties:
      image: python:3.6-alpine
      command: ["/app/container-start.sh"]
      resources:
        requests:
          cpu: 0.5
          memoryInGb: 0.5
      ports:
      - port: 8888          
      environmentVariables:
      - name: SUBREDDIT_NAME
        value: testingground4bots
      - name: SKIP_OLD
        value: True 
      - name: praw_client_id
        value: 3TuPzXlQHyTdZw
      - name: praw_username
        value: KeyForgeCardBot
      - name: praw_user_agent
        value: "KeyForge Card Bot by /u/joyrexj9 1.0.0"
      volumeMounts:
      - name: botgitrepo 
        mountPath: /app
      # - name: dbdata 
      #   mountPath: /data

  osType: Linux
  ipAddress:
    type: Public
    ports:
    - protocol: tcp
      port: 8888   
  volumes:
    - name: botgitrepo
      gitRepo:
        repository: https://github.com/benc-uk/keyforge-bot.git
    # - name: dbdata
    #   azureFile:
    #     shareName": "keyforge-bot-data"
    #     storageAccountName": "myStorageAccount"
    #     storageAccountKey": "<storage-account-key>"
